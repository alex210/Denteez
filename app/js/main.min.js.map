{"version":3,"sources":["main.js"],"names":["$","ajax","type","url","headers","Authorization","services","data","error","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","errorServices","responseJSON","servicesHtml","service","icon","title","renderServices","err","_iterator","return","show","find","html","LastRow","description","magnificPopup","open","src","container","item","_classCallCheck","this","getSizes","amountItems","length","_createClass","key","value","widthRow","width","widthItem","resize","amountRow","Math","floor","stub","allStub","amountLastRow","append","element","size","text","slice","trancateText"],"mappings":"6XAAAA,EAAE,WAEDA,EAAEC,KAAK,CACNC,KAAM,MACNC,IAAK,+CACLC,QAAS,CALTC,cAAW,4CAEZL,QAAO,SAAAM,IAQL,SARKC,GASNC,IAAAA,EAAO,GATDC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAULC,IAAAA,IAAAA,EAAAA,EAAcL,EAAdK,OAAAA,cAAAA,GAAAA,EAAAA,EAAAA,QAAAA,MAAAA,GAAAA,EAAoBC,CAAAA,IAApBD,EAAoBC,EAAAA,MACpBC,GAAAA,+GAQmDC,EAAQC,KAR3D,UAQyED,EAAQE,MARjF,6CAGOC,EAAeZ,MAHtB,oEAXK,MAAAa,GAAAV,GAAA,EAAAC,EAAAS,EAAA,QAAA,KAAAX,GAAAY,EAAAC,QAAAD,EAAAC,SAAA,QAAA,GAAAZ,EAAA,MAAAC,GAcuBX,EAAA,aAAAuB,OAAAC,KAAA,MAAAC,KAAAV,GAW7B,IAAIW,EAAQ,eAAgB,MAxB5BxB,CADMI,EAAAC,OAGNH,MAAAA,SAASI,GAagB,IAAAmB,EAAAA,EAZxBnB,EAAiBM,aAAAN,MAAAmB,YAyBlB3B,EAAE4B,cAAcC,KAAK,CAZpBd,MAAAA,CAMAe,IAAAA,4EAT4BH,EAS5B,6BAT4BzB,KAAA,eAhBlB,IAgBkBwB,EAhBlB,WAgBkB,SAAAA,EAAAK,EAAAC,GAAAC,gBAAAC,KAAAR,GAAAQ,KAAAF,KAAAhC,EAAA+B,EAAA,IAAAC,GAAAE,KAAAH,UAAA/B,EAAA+B,GAAAG,KAAAC,WAAAD,KAAAE,YAAAJ,EAAAK,OAgC5BH,KAAKT,OAhDK,OAAAa,aAAAZ,EAAA,CAAA,CAAAa,IAAA,WAAAC,MAAA,WAoDVN,KAAKO,SAAWP,KAAKH,UAAUW,QAtBjCR,KAAAS,UAAS9B,KAAcc,KAAAA,YAAa,KA9BxB,CAAAY,IAAA,SAAAC,MAAA,WAqCRtC,EAAAA,QAAK0C,OAAA,WALCV,KAAAC,WADTD,KAAAT,WA/BW,CAAAc,IAAA,gBAAAC,MAAA,WA2CkB,IAAAK,EAAAC,KAAAC,MAAAb,KAAAO,SAAAP,KAAAS,WAsB5B,OAAOT,KAAKE,YAAcU,KAAKC,MAAOb,KAAKE,YAAcS,GAAaA,IAjE5D,CAAAN,IAAA,OAAAC,MAAA,WA+CVN,KAAKE,UAAAA,OAAcJ,SA/CT,IAgDV,IAAAgB,EAAAA,kCAAAd,KAAAS,UAAA,cACAM,EAAA,GAuBIC,EAAgBhB,KAAKgB,gBAxEf,EAAAA,GAAAA,IAoDVD,GAAKR,EApDKP,KAAAH,UAAAoB,OAAAF,OAAAvB,EAAA,GA0DT,SAAKS,EAALiB,EAAAC,GACArD,EAAAoD,GAAK3B,KAAL,WACA,IAHD6B,EAAAtD,EAAAkC,MAAAoB,OAIAA,EAAAjB,OAAAgB,GA7DUrD,EAAAkC,MAAAoB,KAAAA,EAAAC,MAAA,EAAAF,GAAA,SAkEVG,EAAA,oBAAA,IAlEUA,EAAA,kBAAA","file":"main.min.js","sourcesContent":["$(function() {\r\n\r\n\t$.ajax({\r\n\t\ttype: \"GET\",\r\n\t\turl: \"http://504080.com/api/v1/services/categories\",\r\n\t\theaders: {\r\n\t\t\t'Authorization': 'e6cbb450cdfed5a75eff6ebab85623d05888f138'\r\n\t\t},\r\n\t\tsuccess: function(services) {\r\n\t\t\trenderServices(services.data);\r\n\t\t},\r\n\t\terror: function(error) {\r\n\t\t\terrorServices(error.responseJSON.error.description);\r\n\t\t}\r\n\t});\r\n\r\n\tfunction renderServices(data) {\r\n\t\tlet servicesHtml = '';\r\n\t\tfor(let service of data) {\r\n\t\t\tservicesHtml += `<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"serviceImg\"><img src=\"http:${service.icon}\" alt=\"${service.title}\" /></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h2>${service.title}</h2>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>`;\r\n\t\t}\r\n\t\t$('.services').show().find('ul').html(servicesHtml);\r\n\t\tnew LastRow('.services ul', 'li');\r\n\t}\r\n\r\n\tfunction errorServices(description) {\r\n\t\t$.magnificPopup.open({\r\n\t  \titems: {\t\r\n\t\t  \tsrc: `<div id=\"modal\">\r\n\t\t\t\t\t\t\t\t<span>Error</span>\r\n\t\t\t\t\t\t\t\t<p>${description}</p>\r\n\t\t\t\t\t\t\t</div>`,\r\n\t\t  \ttype:'inline'\r\n\t  \t}\r\n\t\t});\r\n\t}\r\n\r\n\tclass LastRow {\r\n\t\tconstructor(container, item) {\r\n\t\t\tthis.item = $(container + ' ' + item);\r\n\t\t\tthis.container = $(container);\r\n\t\t\tthis.getSizes();\r\n\t\t\tthis.amountItems = item.length;\r\n\t\t\tthis.html();\r\n\t\t}\r\n\r\n\t\tgetSizes() {\r\n\t\t\tthis.widthRow = this.container.width();\r\n\t\t\tthis.widthItem = this.item.outerWidth(true);\r\n\t\t}\r\n\r\n\t\tresize() {\r\n\t\t\t$(window).resize(function() {\r\n\t\t\t\tthis.getSizes();\r\n\t\t\t\tthis.html();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tamountLastRow() {\r\n\t\t\tlet amountRow = Math.floor( this.widthRow / this.widthItem );\r\n\t\t\treturn this.amountItems - Math.floor( this.amountItems / amountRow) * amountRow;\r\n\t\t}\r\n\r\n\t\thtml() {\r\n\t\t\tthis.container.remove('.stub');\r\n\t\t\tlet stub = `<div class=\"stub\" style=\"width:${this.widthItem}px;\"></div>`;\r\n\t\t\tlet allStub = ''; \r\n\t\t\tlet amountLastRow = this.amountLastRow();\r\n\r\n\t\t\twhile(amountLastRow > 0) {\r\n\t\t\t\tamountLastRow--;\r\n\t\t\t\tallStub += stub;\r\n\t\t\t}\r\n\r\n\t\t\tthis.container.append(allStub);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction trancateText(element, size) {\r\n\t\t$(element).each(function() {\r\n\t\t\tlet text = $(this).text();\r\n\t\t\tif(text.length > size){\r\n\t\t\t\t$(this).text(text.slice(0, size) + '...');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\ttrancateText('.products .text p', 75);\r\n\ttrancateText('.people .text p', 25);\r\n\r\n});"]}