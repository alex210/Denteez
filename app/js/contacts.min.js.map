{"version":3,"sources":["contacts.js"],"names":["$","elem","count","modal","type","message","magnificPopup","items","src","ajax","enquiryType","data","enquiryTypes","renderEnquiryType","name","input","val","change","this","find","text","url","on","characterСounter","length","validate","rules","department","enquiry_type","user_name","email","required","subject","description","submitHandler","form","files","fd","serializeArray","each","contentType","processData","success","trigger","remove","attr","error","maxSize","maxWidth","maxHeight","errorContainer","html","file","reader","img","onload","target","e","Image","width","height","append","result","readAsDataURL","readURL"],"mappings":"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","file":"contacts.min.js","sourcesContent":["$(function() {\r\n\t\r\n\t$.ajax({\r\n\t\ttype: \"GET\",\r\n\t\turl: \"http://504080.com/api/v1/directories/enquiry-types\",\r\n\t\tsuccess: function(enquiryType) {\r\n\t\t\trenderEnquiryType(enquiryType.data);\t\t\t\r\n\t\t}\r\n\t});\r\n\r\n\tfunction renderEnquiryType(data) {\r\n\t\tlet enquiryTypes = '';\r\n\t\tfor(let type in data) {\r\n\t\t\tenquiryTypes += `<option value=\"${+type+1}\">${data[type].name}</option>`;\r\n\t\t}\r\n\t\tlet val = $('#enquiryType').html(enquiryTypes);\r\n\t\tlet input = $('input[name=\"enquiry_type\"]').val(data[0].name);\r\n\t\t\r\n\t\t$('#enquiryType').change(function() {\r\n\t\t\tlet val = $(this).val();\r\n\t\t\tif($(this).val() == 7) {\r\n\t\t\t\tinput.attr('type', 'text');\r\n\t\t\t\tinput.val('');\r\n\t\t\t} else {\r\n\t\t\t\tinput.attr('type', 'hidden');\r\n\t\t\t\tinput.val($(this).find(`option[value=\"${val}\"]`).text());\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tfunction characterСounter(elem, count) {\r\n\t\telem.on('input', function() {\r\n\t\t\tcount.text($(this).val().length);\r\n\t\t});\r\n\t}\r\n\r\n\tcharacterСounter($('#descriptionForm'), $('.counterText span'));\r\n\r\n\t$('#form').validate({\r\n\t\trules: {\r\n\t\t\tdepartment: {\r\n\t\t\t\trequired: true,\r\n\t\t\t},\r\n\t\t\tenquiry_type: {\r\n\t\t\t\trequired: true,\r\n\t\t\t},\r\n\t\t\tuser_name: {\r\n\t\t\t\trequired: true,\r\n\t\t\t},\r\n\t\t\temail: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\temail: true,\r\n\t\t\t},\r\n\t\t\tsubject: {\r\n\t\t\t\trequired: true,\r\n\t\t\t},\r\n\t\t\tdescription: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\tmaxlength: 1000\r\n\t\t\t}\r\n\t\t},\r\n\t\tsubmitHandler: function(form) {\r\n\t\t\tlet fd = new FormData();\r\n\r\n\t\t\tif($('#fileForm')[0].files[0]) {\r\n\t\t\t\tfd.append('file', $('#fileForm')[0].files[0]);\r\n\t\t\t}\r\n\r\n\t\t\tlet data = $(form).serializeArray();\r\n\t\t\t$.each(data, function(key, input){\r\n\t\t\t\tfd.append(input.name,input.value);\r\n\t\t\t});\r\n\r\n\t   \t$.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: \"http://504080.com/api/v1/support\",\r\n\t\t\t\tdata: fd,\r\n\t\t\t\tcontentType: false,\r\n\t\t\t\tprocessData: false,\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\tmodal('Success', data.data.message);\r\n\t\t\t\t\t$(form).trigger('reset');\r\n\t\t\t\t\t$('.counterText span').text('0');\r\n\t\t\t\t\t$('.wrapperFile label .wrapperImg').remove();\r\n\t\t\t\t\t$('#other').attr('type', 'hidden');\r\n\t\t\t\t},\r\n\t\t\t\terror: function(error) {\r\n\t\t\t\t\tmodal('Error', error.responseJSON.error.description);\r\n\t\t\t\t}\r\n\t\t\t});\r\n \t\t}\r\n\t});\r\n\r\n\tfunction modal(type, message) {\r\n\t\t$.magnificPopup.open({\r\n\t  \titems: {\t\r\n\t\t  \tsrc: `<div id=\"modal\">\r\n\t\t\t\t\t\t\t\t<span>${type}</span>\r\n\t\t\t\t\t\t\t\t<p>${message}</p>\r\n\t\t\t\t\t\t\t</div>`,\r\n\t\t  \ttype:'inline'\r\n\t  \t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction readURL(input, maxSize, maxWidth, maxHeight, errorContainer) {\r\n\t\terrorContainer.html('');\r\n\t\t$('.wrapperFile label .wrapperImg').remove();\r\n\r\n\t\tlet file = input.files;\r\n\t  if (file && file[0]) {\r\n\t    let reader = new FileReader();\r\n\r\n\t    let type = file[0].type;\r\n  \t\tif(type != 'image/jpeg' && type != 'image/jpg' && type != 'image/png') {\r\n  \t\t\t$('#fileForm').val('');\r\n  \t\t\terrorContainer.html(`<label class=\"errorFile\">Unsupported file type.</label>`);\r\n  \t\t\treturn false;\r\n  \t\t}\r\n  \t\tif(file[0].size > maxSize) {\r\n  \t\t\t$('#fileForm').val('');\r\n  \t\t\terrorContainer.html(`<label class=\"errorFile\">Maximum size of the uploaded image should not exceed 5MB.</label>`);\r\n  \t\t\treturn false;\r\n  \t\t} \r\n  \t\t\r\n\t    reader.onload = function(e) {\r\n  \t\t\tlet img = new Image();\r\n  \t\t\timg.src = e.target.result;\r\n  \t\t\timg.onload = function() {\r\n        \tif(this.width > maxWidth || this.height > maxHeight) {\r\n        \t\t$('#fileForm').val('');\r\n        \t\terrorContainer.html(`<label class=\"errorFile\">Maximum size of 300x300.</label>`);\r\n        \t} else {\r\n  \t\t\t\t\t$('.wrapperFile label').append(`<div class=\"wrapperImg\"><img src=\"${e.target.result}\" alt=\"\" /></div>`);\r\n        \t}\r\n      \t}\r\n\t    }\r\n\t    reader.readAsDataURL(file[0]);\r\n\t  }\r\n\t}\r\n\r\n\t$('#fileForm').change(function() {\r\n  \treadURL(this, 50000, 300, 300, $('#errorContainer'));\r\n\t});\r\n\r\n});"]}