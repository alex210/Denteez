"use strict";$(function(){var e,t;function a(e,t){$.magnificPopup.open({items:{src:'<div id="modal">\n\t\t\t\t\t\t\t\t<span>'+e+"</span>\n\t\t\t\t\t\t\t\t<p>"+t+"</p>\n\t\t\t\t\t\t\t</div>",type:"inline"}})}$.ajax({type:"GET",url:"http://504080.com/api/v1/directories/enquiry-types",success:function(e){!function(e){var t="";for(var r in e)t+='<option value="'+(+r+1)+'">'+e[r].name+"</option>";$("#enquiryType").html(t);var a=$('input[name="enquiry_type"]').val(e[0].name);$("#enquiryType").change(function(){var e=$(this).val();7==$(this).val()?(a.attr("type","text"),a.val("")):(a.attr("type","hidden"),a.val($(this).find('option[value="'+e+'"]').text()))})}(e.data)}}),e=$("#descriptionForm"),t=$(".counterText span"),e.on("input",function(){t.text($(this).val().length)}),$("#form").validate({rules:{department:{required:!0},enquiry_type:{required:!0},user_name:{required:!0},email:{required:!0,email:!0},subject:{required:!0},description:{required:!0,maxlength:1e3}},submitHandler:function(t){var r=new FormData;$("#fileForm")[0].files[0]&&r.append("file",$("#fileForm")[0].files[0]);var e=$(t).serializeArray();$.each(e,function(e,t){r.append(t.name,t.value)}),$.ajax({type:"POST",url:"http://504080.com/api/v1/support",data:r,contentType:!1,processData:!1,success:function(e){a("Success",e.data.message),$(t).trigger("reset"),$(".counterText span").text("0"),$(".wrapperFile label .wrapperImg").remove(),$("#other").attr("type","hidden")},error:function(e){a("Error",e.responseJSON.error.description)}})}}),$("#fileForm").change(function(){!function(e,t,r,a,i){i.html(""),$(".wrapperFile label .wrapperImg").remove();var n=e.files;if(n&&n[0]){var l=new FileReader,o=n[0].type;if("image/jpeg"!=o&&"image/jpg"!=o&&"image/png"!=o)return $("#fileForm").val(""),i.html('<label class="errorFile">Unsupported file type.</label>');if(n[0].size>t)return $("#fileForm").val(""),i.html('<label class="errorFile">Maximum size of the uploaded image should not exceed 5MB.</label>');l.onload=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){this.width>r||this.height>a?($("#fileForm").val(""),i.html('<label class="errorFile">Maximum size of 300x300.</label>')):$(".wrapperFile label").append('<div class="wrapperImg"><img src="'+e.target.result+'" alt="" /></div>')}},l.readAsDataURL(n[0])}}(this,5e4,300,300,$("#errorContainer"))})});
//# sourceMappingURL=contacts.min.js.map
